/*==================================================
 Copyright 立子
 qq:530331059
 ==================================================*/
(function(){window.payPanel={showPanel:function(_inputOverFn,_cancelFn){panelObj.inputOverFn=_inputOverFn;panelObj.cancelFn=_cancelFn;document.getElementsByClassName("pays")[0].style.display="block";this.isShow=true},closePanel:function(){document.getElementsByClassName("pays")[0].style.display="none";panelObj.clearAll();this.isShow=false},isShow:false};var panelObj={template:"<div class='payPanel'><div class='pass'><ul><li></li><li></li><li></li><li></li><li></li><li></li></ul></div><div class='inputPanel'><div><ul><li><a data-value='1'>1</a></li><li><a data-value='2'>2</a></li><li><a data-value='3'>3</a></li><li><a data-value='4'>4</a></li><li><a data-value='5'>5</a></li><li><a data-value='6'>6</a></li><li><a data-value='7'>7</a></li><li><a data-value='8'>8</a></li><li><a data-value='9'>9</a></li><li class='cancel'><a data-value='cancel'>取消</a></li><li><a data-value='0'>0</a></li><li><a data-value='delete'>删除</a></li></ul></div></div></div>",init:function(){var div=document.createElement("div");div.className="pays";div.innerHTML=this.template;document.body.appendChild(div);this.addEvent()},inputVal:"",addEvent:function(){var inputLi=document.getElementsByClassName("inputPanel")[0].getElementsByTagName("a");for(var i=0,len=inputLi.length;i<len;i+=1){var ele=inputLi[i];ele.addEventListener("touchstart",function(e){e.preventDefault();var value=this.getAttribute("data-value");if(value=="cancel"){panelObj.clearAll();payPanel.closePanel();panelObj.cancelFn!=undefined?panelObj.cancelFn():""}else if(value=="delete"){var len=panelObj.inputVal.length;panelObj.inputVal=panelObj.inputVal.substr(0,len-1);panelObj.clearInputContent(len-1)}else{if(panelObj.inputVal.length>=6){return}panelObj.inputVal+=value;panelObj.setInputContent();if(panelObj.inputVal.length==6){setTimeout(function(){console.log("panelObj.inputVal:"+panelObj.inputVal);panelObj.inputOverFn!=undefined?panelObj.inputOverFn(panelObj.inputVal):"";panelObj.clearAll()},200)}}})}},setInputContent:function(){var index=panelObj.inputVal.length-1;var passLi=document.getElementsByClassName("pass")[0].getElementsByTagName("li");passLi[index].className=" i-circle"},clearInputContent:function(_index){if(_index<0){return}var passLi=document.getElementsByClassName("pass")[0].getElementsByTagName("li");passLi[_index].className=""},clearAll:function(){this.inputVal="";var passLi=document.getElementsByClassName("pass")[0].getElementsByTagName("li");for(var i=0,len=passLi.length;i<len;i+=1){passLi[i].className=""}}};panelObj.init()})(window);